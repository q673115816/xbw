var U=Object.defineProperty,B=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var R=(c,t,o)=>t in c?U(c,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[t]=o,I=(c,t)=>{for(var o in t||(t={}))G.call(t,o)&&R(c,o,t[o]);if(E)for(var o of E(t))H.call(t,o)&&R(c,o,t[o]);return c},N=(c,t)=>B(c,q(t));import{v as K,n as T,d as P,r as j,a as _,o as M,b as m,c as W,e as g,F as C,f as z,g as V,u as D,t as $,h as J,i as Q}from"./vendor.4cfced11.js";const X=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&p(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function p(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}};X();function Y(c={}){const{immediate:t=!1,onNeedRefresh:o,onOfflineReady:p,onRegistered:r,onRegisterError:i}=c;let l,f;const y=async(a=!0)=>{a&&(l==null||l.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),f&&f.waiting&&await T(f.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){l=new K("/xbw/service-worker.js",{scope:"/xbw/"}),l.addEventListener("activated",a=>{a.isUpdate||p==null||p()});{const a=()=>{o==null||o()};l.addEventListener("waiting",a),l.addEventListener("externalwaiting",a)}l.register({immediate:t}).then(a=>{f=a,r==null||r(a)}).catch(a=>{i==null||i(a)})}return y}Y();const Z={class:"ratio-16-9"},ee={class:"inner"},te={id:"direction"},ne=P({setup(c){const t=400,o=400,p=4,r=20,i=50,l=12,f=j(),y=(e,n)=>[e.width/n,e.height/n],a=e=>({top:-e,left:-e,right:e,down:e}),h=_(new Set),v=_({x:0,y:0}),F={top:"\u2191",left:"\u2190",right:"\u2192",down:"\u2193"},x={top:"y",left:"x",right:"x",down:"y"},u=_({current:"top",type:{top:!1,left:!1,right:!1,down:!1},speed:a(p)}),k={ArrowUp:"top",ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},O=_({speed:a(l)}),L=()=>{if(!f.value)return;const e=f.value,n=e.getContext("2d");for(const s in u.type)u.type[s]&&(v[x[s]]+=u.speed[s]);for(const s of h)s[x[s.dir]]+=O.speed[s.dir],console.log(s),(s.y>e.height/2||s.y<-e.height/2||s.x>e.width/2||s.x<-e.width/2)&&h.delete(s);n.fillStyle="#000",n.rect(-e.width/2,-e.height/2,e.width,e.height),n.fill(),n.beginPath();const[d,w]=y(e,r);n.fillStyle="yellow",n.rect(v.x-d/2,v.y-w/2,d,w),n.fill();const[A,S]=y(e,i);n.beginPath();for(const s of h)n.fillStyle="white",n.rect(s.x-A/2,s.y-S/2,A,S);n.fill(),requestAnimationFrame(L)};M(()=>{const e=f.value,n=e.getContext("2d");e.width=t,e.height=o,n.translate(t/2,o/2),n.save(),requestAnimationFrame(L)});const b=(e,n)=>d=>{switch(d.code in k&&e&&n&&n(d.code),d.code){case"ArrowUp":u.type.top=e;break;case"ArrowLeft":u.type.left=e;break;case"ArrowRight":u.type.right=e;break;case"ArrowDown":u.type.down=e;break;case"Space":e&&h.add(N(I({},v),{dir:u.current}));break}};return document.addEventListener("keydown",b(!0,e=>{u.current=k[e]})),document.addEventListener("keyup",b(!1)),(e,n)=>(m(),W(C,null,[g("div",Z,[g("div",ee,[g("canvas",{id:"screen",ref:(d,w)=>{w.screen=d,f.value=d}},null,512)])]),g("div",null,[g("div",te,[(m(),W(C,null,z(F,(d,w)=>g("div",{class:V(["arrow",D(u).type[w]===!0&&"on"])},$(d),3)),64))])])],64))}});const re=P({setup(c){return(t,o)=>(m(),J(D(ne)))}});Q(re).mount("#app");
